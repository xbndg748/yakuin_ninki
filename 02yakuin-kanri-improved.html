<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegalTech å½¹å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
    
    <!-- PWA ãƒ¡ã‚¿ã‚¿ã‚° -->
    <meta name="description" content="ä»»æœŸç®¡ç†ã‚’è‡ªå‹•åŒ–ï¼ãƒ—ãƒ­ã®ãŸã‚ã®å½¹å“¡ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="å½¹å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰">
    <meta name="msapplication-TileColor" content="#667eea">
    <meta name="msapplication-tap-highlight" content="no">
    
    <!-- PWA ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ -->
    <link rel="manifest" href="./manifest.json">
    
    <!-- PWA ã‚¢ã‚¤ã‚³ãƒ³ -->
    <link rel="apple-touch-icon" href="./icon-192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./icon-512.png">
    <link rel="icon" type="image/png" sizes="192x192" href="./icon-192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./icon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./icon-16.png">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .card {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .card h2 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.5rem;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: bold;
            margin-bottom: 5px;
            color: #555;
        }

        .form-group input,
        .form-group select {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            margin-right: 10px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .edit-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            padding: 6px 12px;
            font-size: 0.9rem;
            margin-right: 5px;
        }

        .officer-list {
            margin-top: 20px;
        }

        .officer-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #667eea;
        }

        .officer-info {
            flex-grow: 1;
        }

        .officer-info strong {
            color: #333;
            font-size: 1.1rem;
        }

        .officer-details {
            color: #666;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .expiry-date {
            font-weight: bold;
            padding: 8px 12px;
            border-radius: 5px;
            margin-left: 15px;
        }

        .expiry-soon {
            background-color: #ffebee;
            color: #c62828;
        }

        .expiry-normal {
            background-color: #e8f5e8;
            color: #2e7d32;
        }

        .expiry-expired {
            background-color: #ffcdd2;
            color: #d32f2f;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        .delete-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 3px;
            cursor: pointer;
            margin-left: 5px;
        }

        .delete-btn:hover {
            background: #d32f2f;
        }

        .notification-panel {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            display: none;
        }

        .notification-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
        }

        .notification-item {
            padding: 5px 0;
            border-bottom: 1px solid #f0e68c;
        }

        .notification-item:last-child {
            border-bottom: none;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            display: block;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .month-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .month-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .month-header {
            background: #667eea;
            color: white;
            padding: 15px;
            font-weight: bold;
        }

        .month-content {
            padding: 15px;
        }

        .company-expiry {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            border-left: 3px solid #667eea;
        }

        .export-section {
            text-align: center;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            position: relative;
        }

        .close {
            position: absolute;
            right: 15px;
            top: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            color: #aaa;
        }

        .close:hover {
            color: #000;
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .month-grid {
                grid-template-columns: 1fr;
            }
            
            .officer-item {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>LegalTech å½¹å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <p>ä»»æœŸç®¡ç†ã‚’è‡ªå‹•åŒ–ï¼ãƒ—ãƒ­ã®ãŸã‚ã®å½¹å“¡ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€‚</p>
        </div>

        <!-- é€šçŸ¥ãƒ‘ãƒãƒ« -->
        <div id="notificationPanel" class="notification-panel">
            <div class="notification-title">ğŸ“… ä»Šæœˆæº€äº†äºˆå®šã®å½¹å“¡ä»»æœŸãŒã‚ã‚Šã¾ã™</div>
            <div id="notificationContent"></div>
        </div>

        <!-- çµ±è¨ˆæƒ…å ± -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number" id="totalCompanies">0</span>
                <div class="stat-label">ç®¡ç†ä¼šç¤¾æ•°</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="totalOfficers">0</span>
                <div class="stat-label">ç™»éŒ²å½¹å“¡æ•°</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="expiringSoon">0</span>
                <div class="stat-label">3ãƒ¶æœˆä»¥å†…æº€äº†</div>
            </div>
            <div class="stat-card">
                <span class="stat-number" id="expired">0</span>
                <div class="stat-label">æº€äº†æ¸ˆã¿</div>
            </div>
        </div>

        <!-- ä¼šç¤¾ãƒ»å½¹å“¡ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="card">
            <h2>æ–°è¦ä¼šç¤¾ãƒ»å½¹å“¡ç™»éŒ²</h2>
            <form id="officerForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="companyName">ä¼šç¤¾å</label>
                        <input type="text" id="companyName" required>
                    </div>
                    <div class="form-group">
                        <label for="fiscalMonth">æ±ºç®—æœˆ</label>
                        <select id="fiscalMonth" required>
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="1">1æœˆ</option>
                            <option value="2">2æœˆ</option>
                            <option value="3">3æœˆ</option>
                            <option value="4">4æœˆ</option>
                            <option value="5">5æœˆ</option>
                            <option value="6">6æœˆ</option>
                            <option value="7">7æœˆ</option>
                            <option value="8">8æœˆ</option>
                            <option value="9">9æœˆ</option>
                            <option value="10">10æœˆ</option>
                            <option value="11">11æœˆ</option>
                            <option value="12">12æœˆ</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="officerType">å½¹å“¡ç¨®åˆ¥</label>
                        <select id="officerType" required>
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="å–ç· å½¹">å–ç· å½¹</option>
                            <option value="ç›£æŸ»å½¹">ç›£æŸ»å½¹</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="appointmentDate">å°±ä»»å¹´æœˆæ—¥</label>
                        <input type="date" id="appointmentDate" required>
                    </div>
                    <div class="form-group">
                        <label for="termYears">ä»»æœŸï¼ˆå¹´ï¼‰</label>
                        <select id="termYears" required>
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="1">1å¹´</option>
                            <option value="2">2å¹´</option>
                            <option value="3">3å¹´</option>
                            <option value="4">4å¹´</option>
                            <option value="5">5å¹´</option>
                            <option value="6">6å¹´</option>
                            <option value="7">7å¹´</option>
                            <option value="8">8å¹´</option>
                            <option value="9">9å¹´</option>
                            <option value="10">10å¹´</option>
                        </select>
                    </div>
                </div>
                <button type="submit">å½¹å“¡æƒ…å ±ç™»éŒ²</button>
                <button type="reset">ãƒªã‚»ãƒƒãƒˆ</button>
            </form>
        </div>

        <!-- ç™»éŒ²å½¹å“¡ä¸€è¦§ï¼ˆç›´è¿‘1å¹´é–“ã®ã¿ï¼‰ -->
        <div class="card">
            <h2>ç™»éŒ²å½¹å“¡ä¸€è¦§ï¼ˆç›´è¿‘1å¹´é–“ï¼‰</h2>
            <div id="officerList" class="officer-list"></div>
        </div>

        <!-- æœˆåˆ¥ä»»æœŸæº€äº†ä¸€è¦§ -->
        <div class="card">
            <h2>æœˆåˆ¥ä»»æœŸæº€äº†ä¸€è¦§</h2>
            <div id="monthlyView" class="month-grid"></div>
            <div class="export-section">
                <input type="file" id="csvInput" accept=".csv" style="display: none;">
                <button id="importBtn">CSVä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ</button>
                <button id="exportBtn">CSVå‡ºåŠ›</button>
            </div>
        </div>
    </div>

    <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>å½¹å“¡æƒ…å ±ç·¨é›†</h2>
            <form id="editForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="editCompanyName">ä¼šç¤¾å</label>
                        <input type="text" id="editCompanyName" required>
                    </div>
                    <div class="form-group">
                        <label for="editFiscalMonth">æ±ºç®—æœˆ</label>
                        <select id="editFiscalMonth" required>
                            <option value="1">1æœˆ</option>
                            <option value="2">2æœˆ</option>
                            <option value="3">3æœˆ</option>
                            <option value="4">4æœˆ</option>
                            <option value="5">5æœˆ</option>
                            <option value="6">6æœˆ</option>
                            <option value="7">7æœˆ</option>
                            <option value="8">8æœˆ</option>
                            <option value="9">9æœˆ</option>
                            <option value="10">10æœˆ</option>
                            <option value="11">11æœˆ</option>
                            <option value="12">12æœˆ</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="editOfficerType">å½¹å“¡ç¨®åˆ¥</label>
                        <select id="editOfficerType" required>
                            <option value="å–ç· å½¹">å–ç· å½¹</option>
                            <option value="ç›£æŸ»å½¹">ç›£æŸ»å½¹</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editAppointmentDate">å°±ä»»å¹´æœˆæ—¥</label>
                        <input type="date" id="editAppointmentDate" required>
                    </div>
                    <div class="form-group">
                        <label for="editTermYears">ä»»æœŸï¼ˆå¹´ï¼‰</label>
                        <select id="editTermYears" required>
                            <option value="1">1å¹´</option>
                            <option value="2">2å¹´</option>
                            <option value="3">3å¹´</option>
                            <option value="4">4å¹´</option>
                            <option value="5">5å¹´</option>
                            <option value="6">6å¹´</option>
                            <option value="7">7å¹´</option>
                            <option value="8">8å¹´</option>
                            <option value="9">9å¹´</option>
                            <option value="10">10å¹´</option>
                        </select>
                    </div>
                </div>
                <button type="submit">æ›´æ–°</button>
                <button type="button" onclick="officerManager.closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            </form>
        </div>
    </div>

    <script>
        class OfficerManager {
            constructor() {
                this.officers = JSON.parse(localStorage.getItem('officers')) || [];
                this.currentEditId = null;
                this.init();
            }

            init() {
                this.renderOfficerList();
                this.renderMonthlyView();
                this.updateStats();
                this.checkNotifications();
                this.setupEventListeners();
                
                // æ¯æ—¥ã®é€šçŸ¥ãƒã‚§ãƒƒã‚¯
                setInterval(() => this.checkNotifications(), 24 * 60 * 60 * 1000);
            }

            setupEventListeners() {
                document.getElementById('officerForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.addOfficer();
                });

                document.getElementById('editForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.updateOfficer();
                });

                document.getElementById('exportBtn').addEventListener('click', () => {
                    this.exportData();
                });

                document.getElementById('importBtn').addEventListener('click', () => {
                    document.getElementById('csvInput').click();
                });

                document.getElementById('csvInput').addEventListener('change', (e) => {
                    this.importData(e);
                });

                // å½¹å“¡ç¨®åˆ¥ã«å¿œã˜ãŸä»»æœŸã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š
                document.getElementById('officerType').addEventListener('change', (e) => {
                    const termSelect = document.getElementById('termYears');
                    if (e.target.value === 'å–ç· å½¹') {
                        termSelect.value = '2';
                    } else if (e.target.value === 'ç›£æŸ»å½¹') {
                        termSelect.value = '4';
                    }
                });

                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¯ãƒ­ãƒ¼ã‚ºã‚¤ãƒ™ãƒ³ãƒˆ
                document.querySelector('.close').addEventListener('click', () => {
                    this.closeEditModal();
                });

                window.addEventListener('click', (e) => {
                    if (e.target === document.getElementById('editModal')) {
                        this.closeEditModal();
                    }
                });
            }

            // å’Œæš¦å¤‰æ›é–¢æ•°
            toJapaneseDate(date) {
                const d = new Date(date);
                const year = d.getFullYear();
                const month = d.getMonth() + 1;
                const day = d.getDate();

                let era = '';
                let eraYear = 0;

                if (year >= 2019) {
                    era = 'ä»¤å’Œ';
                    eraYear = year - 2018;
                } else if (year >= 1989) {
                    era = 'å¹³æˆ';
                    eraYear = year - 1988;
                } else if (year >= 1926) {
                    era = 'æ˜­å’Œ';
                    eraYear = year - 1925;
                }

                return `${era}${eraYear}å¹´${month}æœˆ${day}æ—¥`;
            }

            addOfficer() {
                const companyName = document.getElementById('companyName').value;
                const fiscalMonth = parseInt(document.getElementById('fiscalMonth').value);
                const officerType = document.getElementById('officerType').value;
                const appointmentDate = document.getElementById('appointmentDate').value;
                const termYears = parseInt(document.getElementById('termYears').value);

                const officer = {
                    id: Date.now(),
                    companyName,
                    fiscalMonth,
                    officerType,
                    appointmentDate: new Date(appointmentDate),
                    termYears,
                    expiryDate: this.calculateExpiryDate(new Date(appointmentDate), fiscalMonth, termYears),
                    createdAt: new Date()
                };

                this.officers.push(officer);
                this.saveData();
                this.renderOfficerList();
                this.renderMonthlyView();
                this.updateStats();
                this.checkNotifications();
                
                // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
                document.getElementById('officerForm').reset();
                
                alert('å½¹å“¡æƒ…å ±ã‚’ç™»éŒ²ã—ã¾ã—ãŸã€‚');
            }

            editOfficer(id) {
                const officer = this.officers.find(o => o.id === id);
                if (!officer) return;

                this.currentEditId = id;
                
                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’è¨­å®š
                document.getElementById('editCompanyName').value = officer.companyName;
                document.getElementById('editFiscalMonth').value = officer.fiscalMonth;
                document.getElementById('editOfficerType').value = officer.officerType;
                document.getElementById('editAppointmentDate').value = officer.appointmentDate.toISOString().split('T')[0];
                document.getElementById('editTermYears').value = officer.termYears;

                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                document.getElementById('editModal').style.display = 'block';
            }

            updateOfficer() {
                if (!this.currentEditId) return;

                const officerIndex = this.officers.findIndex(o => o.id === this.currentEditId);
                if (officerIndex === -1) return;

                const companyName = document.getElementById('editCompanyName').value;
                const fiscalMonth = parseInt(document.getElementById('editFiscalMonth').value);
                const officerType = document.getElementById('editOfficerType').value;
                const appointmentDate = document.getElementById('editAppointmentDate').value;
                const termYears = parseInt(document.getElementById('editTermYears').value);

                this.officers[officerIndex] = {
                    ...this.officers[officerIndex],
                    companyName,
                    fiscalMonth,
                    officerType,
                    appointmentDate: new Date(appointmentDate),
                    termYears,
                    expiryDate: this.calculateExpiryDate(new Date(appointmentDate), fiscalMonth, termYears)
                };

                this.saveData();
                this.renderOfficerList();
                this.renderMonthlyView();
                this.updateStats();
                this.checkNotifications();
                this.closeEditModal();

                alert('å½¹å“¡æƒ…å ±ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚');
            }

            closeEditModal() {
                document.getElementById('editModal').style.display = 'none';
                this.currentEditId = null;
            }

            calculateExpiryDate(appointmentDate, fiscalMonth, termYears) {
                // å°±ä»»æ—¥ã‹ã‚‰ä»»æœŸå¹´æ•°å¾Œã®æ±ºç®—æœŸã«ãŠã‘ã‚‹å®šæ™‚æ ªä¸»ç·ä¼šçµ‚çµæ™‚ã‚’è¨ˆç®—
                const appointmentYear = appointmentDate.getFullYear();
                const appointmentMonth = appointmentDate.getMonth() + 1;
                
                // å°±ä»»å¾Œã®æ±ºç®—æœŸã‚’ç‰¹å®š
                let targetYear = appointmentYear;
                if (appointmentMonth > fiscalMonth) {
                    targetYear += 1;
                }
                
                // ä»»æœŸå¹´æ•°ã‚’åŠ ç®—
                targetYear += termYears - 1;
                
                // å®šæ™‚æ ªä¸»ç·ä¼šã¯æ±ºç®—æœŸã‹ã‚‰3ãƒ¶æœˆä»¥å†…ï¼ˆæ±ºç®—æœŸã®3ãƒ¶æœˆå¾Œæœ«æ—¥ã‚’æº€äº†æ—¥ã¨ã™ã‚‹ï¼‰
                let expiryMonth = fiscalMonth + 3;
                let expiryYear = targetYear;
                
                if (expiryMonth > 12) {
                    expiryMonth -= 12;
                    expiryYear += 1;
                }
                
                // æœˆæœ«æ—¥ã‚’å–å¾—
                const lastDayOfMonth = new Date(expiryYear, expiryMonth, 0).getDate();
                
                return new Date(expiryYear, expiryMonth - 1, lastDayOfMonth);
            }

            deleteOfficer(id) {
                if (confirm('ã“ã®å½¹å“¡æƒ…å ±ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                    this.officers = this.officers.filter(officer => officer.id !== id);
                    this.saveData();
                    this.renderOfficerList();
                    this.renderMonthlyView();
                    this.updateStats();
                    this.checkNotifications();
                }
            }

            renderOfficerList() {
                const listElement = document.getElementById('officerList');
                
                // ç›´è¿‘1å¹´é–“ã®å½¹å“¡ã®ã¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                const oneYearAgo = new Date();
                oneYearAgo.setFullYear(oneYearAgo.getFullYear() - 1);
                
                const recentOfficers = this.officers.filter(officer => {
                    return new Date(officer.createdAt || officer.appointmentDate) >= oneYearAgo;
                });
                
                if (recentOfficers.length === 0) {
                    listElement.innerHTML = '<p>ç›´è¿‘1å¹´é–“ã«ç™»éŒ²ã•ã‚ŒãŸå½¹å“¡ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>';
                    return;
                }

                // æº€äº†æ—¥é †ã§ã‚½ãƒ¼ãƒˆ
                const sortedOfficers = [...recentOfficers].sort((a, b) => 
                    new Date(a.expiryDate) - new Date(b.expiryDate)
                );

                listElement.innerHTML = sortedOfficers.map(officer => {
                    const expiryDate = new Date(officer.expiryDate);
                    const today = new Date();
                    const daysUntilExpiry = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
                    
                    let expiryClass = 'expiry-normal';
                    let expiryText = `æº€äº†: ${this.toJapaneseDate(expiryDate)}`;
                    
                    if (daysUntilExpiry < 0) {
                        expiryClass = 'expiry-expired';
                        expiryText = `æº€äº†æ¸ˆã¿ (${Math.abs(daysUntilExpiry)}æ—¥çµŒé)`;
                    } else if (daysUntilExpiry <= 90) {
                        expiryClass = 'expiry-soon';
                        expiryText = `æº€äº†ã¾ã§${daysUntilExpiry}æ—¥`;
                    }

                    return `
                        <div class="officer-item">
                            <div class="officer-info">
                                <strong>${officer.companyName}</strong>
                                <div class="officer-details">
                                    ${officer.officerType} | å°±ä»»: ${this.toJapaneseDate(officer.appointmentDate)} | 
                                    ä»»æœŸ: ${officer.termYears}å¹´ | æ±ºç®—: ${officer.fiscalMonth}æœˆ
                                </div>
                            </div>
                            <div class="expiry-date ${expiryClass}">
                                ${expiryText}
                            </div>
                            <div>
                                <button class="edit-btn" onclick="officerManager.editOfficer(${officer.id})">ç·¨é›†</button>
                                <button class="delete-btn" onclick="officerManager.deleteOfficer(${officer.id})">å‰Šé™¤</button>
                            </div>
                        </div>
                    `;
                }).join('');
            }

            renderMonthlyView() {
                const monthlyElement = document.getElementById('monthlyView');
                const monthlyData = {};
                
                // æœˆåˆ¥ã«ã‚°ãƒ«ãƒ¼ãƒ—åŒ–
                this.officers.forEach(officer => {
                    const expiryDate = new Date(officer.expiryDate);
                    const monthKey = `${expiryDate.getFullYear()}-${String(expiryDate.getMonth() + 1).padStart(2, '0')}`;
                    
                    if (!monthlyData[monthKey]) {
                        monthlyData[monthKey] = [];
                    }
                    monthlyData[monthKey].push(officer);
                });

                // ç¾åœ¨æœˆã‹ã‚‰24ãƒ¶æœˆåˆ†è¡¨ç¤º
                const today = new Date();
                const months = [];
                
                for (let i = 0; i < 24; i++) {
                    const month = new Date(today.getFullYear(), today.getMonth() + i, 1);
                    const monthKey = `${month.getFullYear()}-${String(month.getMonth() + 1).padStart(2, '0')}`;
                    months.push({
                        key: monthKey,
                        display: `${month.getFullYear()}å¹´${month.getMonth() + 1}æœˆ`,
                        officers: monthlyData[monthKey] || []
                    });
                }

                monthlyElement.innerHTML = months.map(month => `
                    <div class="month-card">
                        <div class="month-header">
                            ${month.display} (${month.officers.length}ä»¶)
                        </div>
                        <div class="month-content">
                            ${month.officers.length === 0 ? 
                                '<p>æº€äº†äºˆå®šãªã—</p>' : 
                                month.officers.map(officer => `
                                    <div class="company-expiry">
                                        <strong>${officer.companyName}</strong><br>
                                        ${officer.officerType} (${officer.termYears}å¹´ä»»æœŸ)<br>
                                        æº€äº†æ—¥: ${this.toJapaneseDate(officer.expiryDate)}
                                    </div>
                                `).join('')
                            }
                        </div>
                    </div>
                `).join('');
            }

            updateStats() {
                const totalCompanies = new Set(this.officers.map(o => o.companyName)).size;
                const totalOfficers = this.officers.length;
                const today = new Date();
                const threeMonthsLater = new Date(today.getTime() + 90 * 24 * 60 * 60 * 1000);
                
                const expiringSoon = this.officers.filter(officer => {
                    const expiryDate = new Date(officer.expiryDate);
                    return expiryDate >= today && expiryDate <= threeMonthsLater;
                }).length;
                
                const expired = this.officers.filter(officer => {
                    const expiryDate = new Date(officer.expiryDate);
                    return expiryDate < today;
                }).length;

                document.getElementById('totalCompanies').textContent = totalCompanies;
                document.getElementById('totalOfficers').textContent = totalOfficers;
                document.getElementById('expiringSoon').textContent = expiringSoon;
                document.getElementById('expired').textContent = expired;
            }

            checkNotifications() {
                const today = new Date();
                const currentMonth = today.getMonth() + 1;
                const currentYear = today.getFullYear();
                
                // ä»Šæœˆæº€äº†ã®å½¹å“¡ã‚’å–å¾—
                const thisMonthExpiring = this.officers.filter(officer => {
                    const expiryDate = new Date(officer.expiryDate);
                    return expiryDate.getMonth() + 1 === currentMonth && 
                           expiryDate.getFullYear() === currentYear;
                });

                if (thisMonthExpiring.length > 0) {
                    this.showNotification(thisMonthExpiring);
                } else {
                    document.getElementById('notificationPanel').style.display = 'none';
                }
            }

            showNotification(officers) {
                const panel = document.getElementById('notificationPanel');
                const content = document.getElementById('notificationContent');
                
                content.innerHTML = officers.map(officer => `
                    <div class="notification-item">
                        ğŸ“… ${officer.companyName} - ${officer.officerType} 
                        (æº€äº†æ—¥: ${this.toJapaneseDate(officer.expiryDate)})
                    </div>
                `).join('');
                
                panel.style.display = 'block';
                
                // ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®é€ä¿¡ï¼ˆæ¨©é™ãŒã‚ã‚‹å ´åˆï¼‰
                if ('Notification' in window && Notification.permission === 'granted') {
                    new Notification('å½¹å“¡ä»»æœŸæº€äº†é€šçŸ¥', {
                        body: `${officers.length}ä»¶ã®å½¹å“¡ä»»æœŸãŒä»Šæœˆæº€äº†äºˆå®šã§ã™ã€‚`,
                        icon: 'ğŸ“…'
                    });
                }
            }

            exportData() {
                const csvData = [
                    ['ä¼šç¤¾å', 'å½¹å“¡ç¨®åˆ¥', 'å°±ä»»æ—¥', 'ä»»æœŸå¹´æ•°', 'æ±ºç®—æœˆ', 'æº€äº†äºˆå®šæ—¥'],
                    ...this.officers.map(officer => [
                        officer.companyName,
                        officer.officerType,
                        this.toJapaneseDate(officer.appointmentDate),
                        officer.termYears + 'å¹´',
                        officer.fiscalMonth + 'æœˆ',
                        this.toJapaneseDate(officer.expiryDate)
                    ])
                ];

                const csvContent = csvData.map(row => 
                    row.map(field => `"${field}"`).join(',')
                ).join('\n');

                const blob = new Blob(['\uFEFF' + csvContent], { type: 'text/csv;charset=utf-8;' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(blob);
                link.download = `å½¹å“¡ä»»æœŸç®¡ç†_${new Date().toISOString().split('T')[0]}.csv`;
                link.click();
            }

            // CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½
            importData(event) {
                const file = event.target.files[0];
                if (!file) return;

                if (!file.name.endsWith('.csv')) {
                    alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const text = e.target.result;
                        const rows = this.parseCSV(text);
                        
                        if (rows.length === 0) {
                            alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ãŒç©ºã§ã™ã€‚');
                            return;
                        }

                        // ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ãƒã‚§ãƒƒã‚¯
                        const header = rows[0];
                        const expectedHeaders = ['ä¼šç¤¾å', 'å½¹å“¡ç¨®åˆ¥', 'å°±ä»»æ—¥', 'ä»»æœŸå¹´æ•°', 'æ±ºç®—æœˆ'];
                        
                        const validHeaders = expectedHeaders.every(h => 
                            header.some(col => col.includes(h) || h.includes(col.replace(/"/g, '').trim()))
                        );

                        if (!validHeaders) {
                            if (confirm('CSVã®ãƒ˜ãƒƒãƒ€ãƒ¼ãŒæƒ³å®šã¨ç•°ãªã‚Šã¾ã™ã€‚ãã‚Œã§ã‚‚ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’ç¶šã‘ã¾ã™ã‹ï¼Ÿ\n\næœŸå¾…ã•ã‚Œã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼: ' + expectedHeaders.join(', '))) {
                                // ãƒ˜ãƒƒãƒ€ãƒ¼ãªã—ã¨ã—ã¦å‡¦ç†
                            } else {
                                return;
                            }
                        }

                        // ãƒ‡ãƒ¼ã‚¿è¡Œã®å‡¦ç†ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼è¡Œã‚’ã‚¹ã‚­ãƒƒãƒ—ï¼‰
                        const dataRows = validHeaders ? rows.slice(1) : rows;
                        const importedOfficers = [];
                        const errors = [];

                        dataRows.forEach((row, index) => {
                            try {
                                const officer = this.parseOfficerFromCSV(row, index + (validHeaders ? 2 : 1));
                                if (officer) {
                                    importedOfficers.push(officer);
                                }
                            } catch (error) {
                                errors.push(`è¡Œ${index + (validHeaders ? 2 : 1)}: ${error.message}`);
                            }
                        });

                        if (errors.length > 0) {
                            const continueImport = confirm(`${errors.length}ä»¶ã®ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Šã¾ã™:\n\n${errors.slice(0, 5).join('\n')}${errors.length > 5 ? '\n...(ä»–' + (errors.length - 5) + 'ä»¶)' : ''}\n\næ­£å¸¸ãªãƒ‡ãƒ¼ã‚¿ã®ã¿ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã‹ï¼Ÿ`);
                            if (!continueImport) {
                                return;
                            }
                        }

                        if (importedOfficers.length === 0) {
                            alert('ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚');
                            return;
                        }

                        // æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã¨ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯
                        const duplicateCount = importedOfficers.filter(newOfficer => 
                            this.officers.some(existingOfficer => 
                                existingOfficer.companyName === newOfficer.companyName &&
                                existingOfficer.officerType === newOfficer.officerType &&
                                new Date(existingOfficer.appointmentDate).getTime() === new Date(newOfficer.appointmentDate).getTime()
                            )
                        ).length;

                        let confirmMessage = `${importedOfficers.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚`;
                        if (duplicateCount > 0) {
                            confirmMessage += `\nï¼ˆ${duplicateCount}ä»¶ã®é‡è¤‡ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¾ã™ï¼‰`;
                        }
                        if (errors.length > 0) {
                            confirmMessage += `\nï¼ˆ${errors.length}ä»¶ã®ã‚¨ãƒ©ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¯é™¤å¤–ã•ã‚Œã¾ã™ï¼‰`;
                        }

                        if (confirm(confirmMessage + '\n\nç¶šè¡Œã—ã¾ã™ã‹ï¼Ÿ')) {
                            this.officers.push(...importedOfficers);
                            this.saveData();
                            this.renderOfficerList();
                            this.renderMonthlyView();
                            this.updateStats();
                            this.checkNotifications();

                            alert(`${importedOfficers.length}ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚` + 
                                  (errors.length > 0 ? `\n${errors.length}ä»¶ã®ã‚¨ãƒ©ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¯é™¤å¤–ã•ã‚Œã¾ã—ãŸã€‚` : ''));
                        }

                    } catch (error) {
                        alert('CSVãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\nãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚\n\nã‚¨ãƒ©ãƒ¼: ' + error.message);
                    }

                    // ãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã‚’ãƒªã‚»ãƒƒãƒˆ
                    event.target.value = '';
                };

                reader.readAsText(file, 'UTF-8');
            }

            // CSVè§£ææ©Ÿèƒ½
            parseCSV(text) {
                const lines = text.split('\n').filter(line => line.trim());
                return lines.map(line => {
                    const columns = [];
                    let current = '';
                    let inQuotes = false;
                    
                    for (let i = 0; i < line.length; i++) {
                        const char = line[i];
                        
                        if (char === '"') {
                            if (inQuotes && line[i + 1] === '"') {
                                current += '"';
                                i++; // Skip next quote
                            } else {
                                inQuotes = !inQuotes;
                            }
                        } else if (char === ',' && !inQuotes) {
                            columns.push(current.trim());
                            current = '';
                        } else {
                            current += char;
                        }
                    }
                    columns.push(current.trim());
                    
                    return columns.map(col => col.replace(/^"|"$/g, ''));
                });
            }

            // CSVè¡Œã‹ã‚‰å½¹å“¡ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
            parseOfficerFromCSV(row, rowNumber) {
                if (row.length < 5) {
                    throw new Error(`ãƒ‡ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™ï¼ˆ${row.length}åˆ—ï¼‰`);
                }

                const [companyName, officerType, appointmentDateStr, termYearsStr, fiscalMonthStr] = row;

                // å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ãƒã‚§ãƒƒã‚¯
                if (!companyName || !officerType || !appointmentDateStr || !termYearsStr || !fiscalMonthStr) {
                    throw new Error('å¿…é ˆé …ç›®ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã›ã‚“');
                }

                // å°±ä»»æ—¥ã®è§£æï¼ˆå’Œæš¦ãƒ»è¥¿æš¦ä¸¡å¯¾å¿œï¼‰
                let appointmentDate;
                try {
                    appointmentDate = this.parseJapaneseDate(appointmentDateStr);
                    if (!appointmentDate) {
                        // è¥¿æš¦ã§ã®è§£æã‚’è©¦è¡Œ
                        appointmentDate = new Date(appointmentDateStr.replace(/å¹´|æœˆ|æ—¥/g, match => 
                            match === 'å¹´' ? '-' : match === 'æœˆ' ? '-' : ''
                        ));
                    }
                    if (isNaN(appointmentDate.getTime())) {
                        throw new Error('æ—¥ä»˜å½¢å¼ãŒç„¡åŠ¹ã§ã™');
                    }
                } catch (e) {
                    throw new Error(`å°±ä»»æ—¥ã®è§£æã«å¤±æ•—: ${appointmentDateStr}`);
                }

                // ä»»æœŸå¹´æ•°ã®è§£æ
                const termYears = parseInt(termYearsStr.replace(/å¹´/g, ''));
                if (isNaN(termYears) || termYears < 1 || termYears > 10) {
                    throw new Error(`ä»»æœŸå¹´æ•°ãŒç„¡åŠ¹ã§ã™: ${termYearsStr}`);
                }

                // æ±ºç®—æœˆã®è§£æ
                const fiscalMonth = parseInt(fiscalMonthStr.replace(/æœˆ/g, ''));
                if (isNaN(fiscalMonth) || fiscalMonth < 1 || fiscalMonth > 12) {
                    throw new Error(`æ±ºç®—æœˆãŒç„¡åŠ¹ã§ã™: ${fiscalMonthStr}`);
                }

                // å½¹å“¡ç¨®åˆ¥ã®ãƒã‚§ãƒƒã‚¯
                if (!['å–ç· å½¹', 'ç›£æŸ»å½¹'].includes(officerType)) {
                    throw new Error(`å½¹å“¡ç¨®åˆ¥ãŒç„¡åŠ¹ã§ã™: ${officerType}`);
                }

                return {
                    id: Date.now() + Math.random(), // é‡è¤‡ã‚’é¿ã‘ã‚‹ãŸã‚ãƒ©ãƒ³ãƒ€ãƒ è¦ç´ ã‚’è¿½åŠ 
                    companyName: companyName.trim(),
                    fiscalMonth,
                    officerType: officerType.trim(),
                    appointmentDate,
                    termYears,
                    expiryDate: this.calculateExpiryDate(appointmentDate, fiscalMonth, termYears),
                    createdAt: new Date()
                };
            }

            // å’Œæš¦æ–‡å­—åˆ—ã‚’æ—¥ä»˜ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›
            parseJapaneseDate(dateStr) {
                const patterns = [
                    { regex: /ä»¤å’Œ(\d+)å¹´(\d+)æœˆ(\d+)æ—¥/, baseYear: 2018 },
                    { regex: /å¹³æˆ(\d+)å¹´(\d+)æœˆ(\d+)æ—¥/, baseYear: 1988 },
                    { regex: /æ˜­å’Œ(\d+)å¹´(\d+)æœˆ(\d+)æ—¥/, baseYear: 1925 }
                ];

                for (const pattern of patterns) {
                    const match = dateStr.match(pattern.regex);
                    if (match) {
                        const [, eraYear, month, day] = match;
                        const year = pattern.baseYear + parseInt(eraYear);
                        return new Date(year, parseInt(month) - 1, parseInt(day));
                    }
                }

                return null;
            }

            saveData() {
                localStorage.setItem('officers', JSON.stringify(this.officers));
            }
        }

        // ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³åˆæœŸåŒ–
        const officerManager = new OfficerManager();

        // ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ã®è¨±å¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }

        // Service Worker ç™»éŒ² (PWAå¯¾å¿œ)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', async () => {
                try {
                    const registration = await navigator.serviceWorker.register('./sw.js');
                    console.log('[PWA] Service Worker ç™»éŒ²æˆåŠŸ:', registration.scope);
                    
                    // æ›´æ–°ãƒã‚§ãƒƒã‚¯
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        console.log('[PWA] Service Worker æ›´æ–°æ¤œå‡º');
                        
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                console.log('[PWA] æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒåˆ©ç”¨å¯èƒ½ã§ã™');
                                // å¿…è¦ã«å¿œã˜ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æ›´æ–°ã‚’é€šçŸ¥
                                if (confirm('ã‚¢ãƒ—ãƒªã®æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚æ›´æ–°ã—ã¾ã™ã‹ï¼Ÿ')) {
                                    window.location.reload();
                                }
                            }
                        });
                    });
                    
                } catch (error) {
                    console.error('[PWA] Service Worker ç™»éŒ²å¤±æ•—:', error);
                }
            });
        }

        // PWA ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¿ƒé€²
        let deferredPrompt;
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
            console.log('[PWA] ã‚¢ãƒ—ãƒªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½');
            
            // 3ç§’å¾Œã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¿ƒé€²ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
            setTimeout(() => {
                if (confirm('ã“ã®ã‚¢ãƒ—ãƒªã‚’ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã®ãƒ›ãƒ¼ãƒ ç”»é¢ã«è¿½åŠ ã—ã¾ã™ã‹ï¼Ÿã‚ˆã‚Šä¾¿åˆ©ã«åˆ©ç”¨ã§ãã¾ã™ã€‚')) {
                    deferredPrompt.prompt();
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('[PWA] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’æ‰¿èª');
                        }
                        deferredPrompt = null;
                    });
                }
            }, 3000);
        });

        // ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸæ™‚
        window.addEventListener('appinstalled', (e) => {
            console.log('[PWA] ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã—ãŸ');
            // ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã®é€šçŸ¥
            if ('Notification' in window && Notification.permission === 'granted') {
                new Notification('LegalTech å½¹å“¡ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰', {
                    body: 'ã‚¢ãƒ—ãƒªãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¾ã—ãŸã€‚ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚',
                    icon: './icon-192.png'
                });
            }
        });
    </script>
</body>
</html>